\chapter{Introduction}
Cyber-infrastructural systems are getting more integrated with our day-to-day life and have more impact on society, thus, there is a need for approaches to make sure that these systems are operating in a way that is more aligned with norms of society (or policies, rules, regulations). This means norms and policies should be considered as part of infrastructure development and maintenance cycles by the designers. On the other hand, infrastructures affect society and by extension, they are also affecting the norms and how that society is governed, so they should be already considered when policymakers and governance bodies are analyzing existing norms or implementing new policies and services. Taking modelling and model execution as a principal approach to analysing a system, intuitively, requires the experts to be able to create models of these concepts, which include executable models of the infrastructure, relevant norms, and, the social setting and its actors. The expressivity and flexibility required to encompass these aspects are not trivial. It is no longer just a model of infrastructure, social setting, and set of norms, but, it is an infrastructure that is utilized by social actors and governed by norms, a social setting that utilizes and monitors the infrastructure, and decides upon, modifies, analyzes and enforces the norms, and, norms that regulate the infrastructure and the social setting and have impacts on both.


The purpose of this thesis is to closely study the interactions between these concepts, and search for fundamental gaps in current methodologies utilized by system designers, policymakers, and governance bodies to find approaches for creating more expressive and tangible models that are also flexible enough for specifying different scenarios and use-cases in different domains. To propose realistic methods, aside from the theoretical analysis, proof-of-concept tools have also been developed or adopted at each step and are presented.


\paragraph{Social Norms and Behavioral Patterns}
A central theme in this thesis is norms and their relation with individual behavioral patterns. The definition of norms for specific use cases and domains is specified in corresponding chapters, but, it is valuable to set the tone on the complexities of this concept. The daily social life of a human is filled with objectively complex interactions, but somehow we can navigate these dynamic and nondeterministic interactions with a sufficiently low allocation of processing resources. A concept that aids us in doing so is norms, by defining what should and should not be the case and what is expected to happen or not to happen in certain contexts and under certain conditions, norms drive the actions in our fairly complex interactions. 


The fascinating thing about norms is that in any given situation, all parties involved are (somewhat) internally aware of the process and they can act accordingly. We can even deduce this (most probably) correct process in face of highly dynamic and nondeterministic situations with a multitude of variables. It seems like somehow we have converged very closely to a set of abstract, parameterized, context-based, and flexible scenario templates for interactions defined by norms that we use regularly as a coordination mechanism in society. These scenario templates have placeholders for different roles each with its own script, and most of the time we can (almost) precisely interpret a situation, select a relevant and applicable template and instantly fill the parameters and role placeholders with qualified values and infer some sort of decision tree that tells us how interactions can and should move forward. We even monitor and observe events and (own or others') actions and qualify them as traversal steps in these scenarios. Furthermore, concerning our part in a scenario, we seem to have internalized behavioral specifications or partial plans that allow us to enact and embody the role that we have filled with ourselves.


Interpreting the context, selecting a relevant and applicable scenario template, filling in the variables, and qualifying observation are the main components of utilizing scenario templates defined by norms. 

Take a simplistic example that is later on used in this thesis namely a sale transaction; regardless of the specific contexts, the norms for a typical sale transaction specify (almost globally accepted) predefined roles (buyer/seller), variables (item/price) and actions (offer/accept/pay/deliver) related to it. For an example of interpreting the context and selecting an applicable scenario take in-person shopping versus online shopping, while there are obvious differences in the variables and actions involved, we can think of them as the same thing that is a sale transaction with the same abstract template. For an example of filling in the variables, we can easily qualify actors and put them in proper roles the role of the seller in a sale transaction can be filled with ourselves, another person, a company, or more interestingly even an automated software in the form of a webshop. The same level of abstraction also applies to qualifying observations and expectations, receiving cash from an in-person buyer can be qualified as the same action as a notification of a transfer from a banking infrastructure, and the expectation of receiving an item in the next few moments from an in-person seller is the same as the expectations of receiving an oversea delivery in the next few weeks.

Scenario templates defined by norms are also highly dynamic and flexible. During an interaction, we are constantly monitoring the scenario for deviations from what we expect to occur. Some deviations can be negligible: while somewhat unexpected, they do not change the context of the interaction completely, like not receiving a delivery when it was supposed to arrive, or maybe there was a delay. However, some deviations completely change the context, like never receiving an item you paid for and not being able to contact the seller. What is interesting about deviations is that we even have modular and predefined contingency plans for when a concrete scenario is not played according to the expectations of its template. These plans can vary from attempting to fix the concrete scenario, like waiting a bit longer than expected for delivery, to revising some beliefs that resulted in the unexpected situation like removing a particular actor from the qualifications that make them suitable for the seller role to even rewriting the qualification or behavioral rules altogether like never buying anything from any unrecognized webshops.

\paragraph{Regulations, Compliance, and Governance}
Regulations are a form of norms that are (partially) concretized, written as a normative text, and enforced by some authoritative body that governs a system.  Cyber-infrastructural systems that affect members of society ideally should be fully compliant with the norms and regulations of that society. There are multiple ways to ensure compliance in a system, depending on its size, complexity, norms that govern it, and the governing bodies that are concerned with monitoring and regulating it. Some policies can be operationalized in terms of access control. For example, some infrastructures with pre-defined and static internal policies can be developed with the policies already hard-coded in them, intuitively, this is the most efficient approach whilst being the least scalable and maintainable. Some systems use run-time policy-making protocols like LDAP to make sure the infrastructure is running in a compliant manner by e.g., taking permission from policy enforcement points that take advice from policy decision points which in turn retrieve policies from policy information points. Then, by modifying the policies in information points, the administrators can control enforced policies without changing the infrastructure itself. 

These approaches can be referred to as \textit{compliant by design} and are arguably suitable for many situations. That is, until the point that norms in question become more complicated than simple non-conflicting, non-contradicting, easy-to-interpret regulative norms defined in terms of deontic notions of permissions, obligations, and prohibitions implemented in the form of ex-ante access rules. As is observed in the literature --and illustrated with multiple examples in this thesis -- norms do indeed become more complex much sooner than anticipated by most studies, and in fact, are vastly simplified in current compliance-checking approaches. 


Norms are more than a set of formal rules extracted from a legislative text: they emerge from multiple sources with different degrees of priority, and they require interpretation to be encoded and qualification to be applied within a social context. Furthermore, they continuously adapt, in both expression and application~\cite{Boella2014APractice}. Also, in any given context multiple normative sources may be concurrently relevant, and/or multiple interpretations of the same normative sources may be available (e.g. retrieved from previous cases), and these may be possibly conflicting. Finally, not all regulations are ex-ante norms about controlling actions prior to the performance of the action, instead, they are ex-post rules about what ought to be if certain actions have been performed already.% This makes conflict resolution and interpretation and concepts like consequences of actions detrimental parts of compliance-checking.


Furthermore, norms are traditionally distinguished between \textit{regulative} and \textit{constitutive} norms~\cite{Searle1969,Boella2004RegulativeSystems,Sileno2015}. Regulative norms regulate behaviors that exist independent of the norms and are generally prescribed in terms of \textit{permissions}, \textit{obligations} and, \textit{prohibitions} (e.g. traffic regulations). Constitutive norms determine that some entity (e.g. an object, a situation, a certain agent, a certain behaviour) ``counts as'' something else, creating a new institutional entity that does not exist independently of these norms. (for example, the concept of marriage or money as a legal means of payment). The concept of institutional power is particularly relevant in the context of constitutive norms, as it is used to ascribe institutional meaning to performances (e.g. raising a hand counts as a bid during an auction).

% A conceptual framework that instead contains both deontic and potestative dimensions is the one proposed by Hohfeld \cite{hohfeld1917fundamental}, whereas deontic logic, although much more popular, by definition focuses on regulative norms. %This work tries to take a step in the direction of taking these concepts into account in the process of designing compliant systems, or, modifying existing systems to be compliant.

These complexities in norms alongside the fact that cyber-infrastructural systems also include human actors and institutions that are certainly not fully compliant (and arguably, not even benevolent) means that such systems can not be fully compliant by design. Instead, such systems require \textit{governance}~\cite{vanengers2010egoverment}, which includes creation of new policies and regulations or modifying existing ones, enforcing these policies, providing supportive services, monitoring, analysing and imposing punishments and sanctions where needed. Intuitively, if components of the system can be feasibly compliant by design, that is a desirable attribute. However, when the governed system has rapidly changing technological components in it, there will be a need for approaches in adaptation of the governance that can keep up with these changes, and this thesis argues that modelling is a feasible approach. 


\paragraph{Models of Agency}
Agency is another concept that is central to this work. Software systems are generally considered to be void of real agency (specifically in legal terms) and are controlled through specific control structures, even if those structures consist of probabilistic flows that can change as the system interacts with its environment like in case of reinforcement learning they still have a control structure. This assumption becomes fuzzy when it comes to computational models of social actors as these models need to take agency into account, like executable models that should represent humans or organizations, as without access to fully developed artificial general intelligence, it is hard to claim that a software agent has agency. Then the question is how do we model such actors? There are two main approaches used in the field to model concepts of agency such as objectives and preferences, namely these approaches are (1) modelling agents in terms of variables and mathematical functions, and, (2) modelling agents with means of agent-oriented programs often in the form of logic-based rational behavioral specifications, that often are deployed in a Multi-Agent System (MAS).


The first approach has many advantages, firstly, mathematical models are often more efficient in execution resulting in them being more scalable. Also, defining agents in terms of a few variables makes them easier for experimentation particularly in simulations, and, it also makes them much easier to manipulate at run-time, to simulate adaptation and learning processes. In general, when the purpose of a research is to study the outcome of social phenomena in certain settings without regards to the model of the input agent, mathematical models are suitable. An example of these approaches is the simulations of disaster response and relief, where purpose of the study is to find the optimal settings or infrastructures to minimize damage. In these cases the agents ---social or infrastructural--- are generally considered to have mathematical specifications that encompass a statistically realistic representation of how a civilian, a disaster response team, or an infrastructure will or should act in case of an incident or natural disaster as their utility function~\cite{arinta2019disaster,khouj2011disaster,chamola2021disaster}, keeping higher level concepts like purpose or intentions implicit in the models.


Where mathematical models fall short and programmable models are advantageous is studies where expressivity and transparency of the models is the main point. In these cases, even if the execution is less efficient and adaptability is harder to achieve, it is still worth to have self-explanatory and readable models of agents that have explicit notions of agency such as intentions and act in a configurable social setting. These are the cases where the purpose of the study is to analyze the agents and the society of agents without much regard to optimizing an outcome and often there is no obvious and well-defined utility function to optimize anyways. The study of norms and normative systems is one domain where these approaches are far more adopted, domains where analysing overall emergent behaviors, general trajectory of the society of agents, and the effect of norms and policies on that society are the main point of the study. Then the expressivity and transparency of the models and their decision-making becomes more important in analyzing and explaining (non-)compliant behaviors that goes beyond utility functions~\cite{van2019governmental}. This research intrinsically falls into this category, and, as it will be presented in later chapters, the Belief-Desire-Intention (BDI) model of agency \cite{Rao1995} is utilized in modelling agents. By specifying agents in terms of human-related attitudes, BDI agents are suitable in modelling social agents. More interestingly, majority of the concepts defined in the previous section about norms, like presence of behavioral specifications that can be matched and concretized in certain situations, or having contingency plans for failures are all already (partially) identified by BDI models to various degrees of success.


\section{Motivation and Research Question}
The overarching motivation of this research started has been in creation of a digital data market-places (DMP) specially in the field of logistics data. The need for data is exponentially increasing in all research and industries, and an environment like a DMP can provide different parties a place to share (or buy and sell) scientific or corporate data with each other. Although the presence of such environment can vastly improve the efficiency of data-oriented research and even prevent issues like data monopolies, there are certain risks involved, such as privacy issues, competitive corporate advantages, and, legal problems. As more governments (and other authoritative bodies) are implementing regulations to govern data transactions, such sharing environment needs to be compliant with these regulations, also actors in these markets like organizations and companies may have ad-hoc contractual agreements about data-sharing, and, they may also have internal policies like user agreements about how they can share data. The complexities of the market-places alongside the requirement for compliance results in a need for approaches to automate governance. This work started by focusing exactly that, how do we govern a data-sharing infrastructure? 


However, during this research it turned out that it is not only data-sharing use-cases that are in need of such methods. More aspects of our day-to-day life are being \textit{controlled} by automated processes; visa applications, job applications, credit placements, mortgage and insurance are just a few examples and one can only imagine that the list will continue to grow as time goes on. Even if data-sharing regulations are a relatively new phenomena, when taken in a broader sense, there are already regulations implemented for other domains that are now becoming more automated, and when the decisions are made in an automated manner, then the question becomes how do we govern any automated process with respect to arbitrary (regulative and constitutive) normative sources? This thesis takes a subset of this question as its main purpose, by assuming modelling and model execution as a principal step in system design and policy making:


\textbf{Main Research Question:} How can we model a norm-governed cyber-infrastructural system?



\section{Approach and Scope of this Thesis}
The first step in defining the scope of this thesis is to break the main research question structurally by further defining what it is that needs to be modelled: a norm-governed cyber-infrastructural system. The main components are norms, social setting and software/infrastructure that create the system as a whole. 
%but also there is the assumption of openness, which means the system that is being modelled interacts with, affects and get affected by an external undefined environment. 
Then the main research sub-questions should intuitively become how to model each of these three components. But, unfortunately it is not that simple as these concepts are not at the same level of abstraction for the purposes of this research. 
%Starting from the concept of social setting, it is arguably the main focus of this work, modelling social agents seems to be one of the keys to modelling such systems, but why? 

Take the concept of norms, while modelling them is essential for the whole picture, it is still social agents that act as the governance bodies that regulate other entities of the system, and in effect, it is social agents that are being governed, i.e., it is very hard to talk about norm-related concepts (e.g. sanction) without referring to human-related concepts (e.g. intention).
Indeed it is rare to see an infrastructure being punished for non-compliant actions without referring to a social agent (a person, company, institution, organization) as the main liable entity for those actions, or, it would be untenable to say a software or infrastructure is imposing a sanction without the presence of a social agent (an organization, consortium, government)  holding the power to impose that punishment. In effect, norms as are studied in this research ---as it is often the case in real life--- do not have isolated meaning by themselves and without the social setting. 

The same logic goes for software and infrastructural components, while being another important part of the system model, it is still their usage by and effects on social agents that is being scrutinized. Furthermore, while software modelling is a mature and advanced field of study, the purposes of this work are aimed at possibility of a more realistic view of software systems. Such realistic view reveals that software and infrastructural systems are very technology-dependant subjects and high-level models of them are rarely complete without their low-level technological details. It is hard to discuss about a data transfer without mentioning if that data is personal or not, anonymized or not, plain or encrypted, or if the transmission channel is secure or not. In summary, in the context of this thesis, social agents are the glue that hold the models together. As this modelling is done for the purpose of analysing the system as a whole, the expressivity and transparency of agent models is a requirement.


\textbf{Research Question 1:} \textit{How to create expressive and modular models of social agents?}


The short answer to this question is agent-based programming is the most suitable approach to create models of agents. The alternate approach that is mathematical models while having many advantages are simply not transparent enough at the required level of abstraction for our use-cases: it is not easy to model intention for example in an effectively optimizer agent that has a utility function driving its decisions. The approach adopted in this work to agent-based programming is the the Belief-Desire-Intention model. While there are multiple BDI frameworks introduced in the literature, after much deliberation and testing it turned out they did not meet the requirements of this study, maybe the most important one being modularity.

In the process of this work, a BDI (and MAS) framework called AgentScript Cross-Compiler (ASC2) was designed and developed with these requirements in mind which uses a programming language based on the AgentSpeak(L). As the main requirement, modularity is addressed in the sense that ASC2 does not assume a hard-coded reasoning and decision-making cycle for agents, an in fact almost every aspect of the agents is programmable. This is made possible mainly because of two reasons. Firstly ASC2 utilizes actor-oriented programming via Akka actor framework meaning each agent consists of multiple actors each with their own role that can communicate through internal messaging, effectively making an agent a modular actor micro-system in itself. Secondly, by following software engineering best practices and methodologies like Dependency Injection and Inversion of Control. By using Dependency Injection, most components and subcomponents of an an agent can be sent to it as potentially customized dependencies. Furthermore, with Inversion of Control it is the lower level components that are mainly controlling the nuanced execution cycle when higher level components only define abstract control flows. The ASC2 framework is introduced from an engineering perspective in Chapter \ref{ch:agere}. 

Next, there is the issue of how to model software and infrastructural entities. This question effectively falls out of the scope of this thesis, instead, the focus is on their utilization by social agents. Important steps are taken to provide a high level of interoperability for social agents modelled in ASC2 to virtually any type of model of software and infrastructural entities that are being used by the designer and policy-maker, including the actual real entities.

\textbf{Research Question 2:} \textit{How can social agents utilize software and infrastructural models or entities?}

The answer to this question is in the \textit{Cross-Compiler} part of ASC2. As it is addressed in Chapters \ref{ch:agere,ch:emas}, after compilation ASC2 agents are technically JVM programs meaning they are indeed interoperable with any system that for example a Java program can utilize or communicate with. This results in much more effective modelling cycles as there is far less concern about connecting the models to real system or interfaces.


Next is the notion of norms, modelling them including social norms, regulations, contractual agreements, internal policies is an important part of the modelling that this thesis aims at. However, while different approaches and ideas about modelling norms is explored in this work, defining any novel approach to do so falls out of the scope of this thesis for both theoretical and practical reasons. The practical reason is mainly that other threads of dedicated research were being performed on this matter within the research group that both affected and utilized this work. The theoretical reason is that there are various levels of abstraction that norms can be modelled for different use-cases and this work stays agnostic to which approach is the most suitable. However, the question that is studied is the concept of norms from the perspective of social agents:


\textbf{Research Question 3:} \textit{How can social agents reason with and about norms?}


The main concern of this thesis on this question has been to study the interactions between social agents and norms, including the interpretation and qualification of events between institutional and physical realities, understanding compliant and non-compliant bahaviors and the relation between compliance and autonomoy. This is addressed in section \ref{ch:eumas} with introducing the concept of normative advisors, a flexible approach that can be utilized by social agents to have an understanding of normative positions in their environment without reducing their autonomoy.


This thesis started from the assumption that agent-based programming is a more expressive approach than mathematical models with utility functions. However, it also revisits the validity of that assumption. BDI models --- and more specific to this work, AgentSpeak(L)-like models--- are designed with expressivity and readability as a first class requirements, but these are still not fully solved issues. Mathematical models of agents are mainly aimed at optimizing a certain utility function, it can be conceptually viewed as if such an agent has the quantitative objectives, desire or preference of maximizing that function. Then, what are the objectives, desire or preference of an agent-based program? Furthermore, in the process of this research it was observed that by adding norms and normative reasoning into the these concepts become even more important. Norms in every form can be ---and often are--- conflicting and their conflicts can rarely be resolved by quantitative approaches, then, how should an agent program behave in face of conflicts? There is obviously not a very concrete answer to this question as it will depend on the context, and this thesis only addresses this by taking the stance that:  it depends on the preferences and desires of the agent, however, the designer should be able to program these notions. The issue addressed here is not about what is the \textit{most approperiate} behavior of the agent as the consequence of its decision-making and conflict resolution; that will depend on what the designer is modelling. Instead, it is how such decision-making can be expressed in a transparent manner:

\textbf{Research Question 4:} \textit{How can we model desires and preferences of agent?}

This question is addressed in Chapter \ref{ch:aamas} by introducing the concept of explicit preferences in the form of CP-Nets into the BDI model and the AgentScript programming language. With this approach, the designer can separate the concern between the procedural or the \textit{how-to} knowledge of the agent program from the preferential or \textit{what-to} knowledge. This makes the decision-making of the agents more transparent which is a requirement in models that are created for the purpose of analysis. 

The last issue addressed in this thesis is the practicality of utilizing agent-based models as part of real-world system design and policy-making, not only as they are used in this work but the whole agent-based modelling community. It is always the case that accessibility and usability of the tools in a certain methodology is an important part of their adoption, it is hard and mostly not feasible to convince domain experts like programmers to utilize an approach if they need to also learn a whole new set of tools and ecosystems. This is also the case for utilizing agent-based models and has been a major concern in this work

\textbf{Research Question 5:} \textit{How to make agent-based modelling a usable approach for mainstream designers?}

In the recent years the tools created for design and development in mainstream software community are becoming more advanced and efficient. A few examples of such tools are IDEs, testing libraries, build tools, code coverage tools, code repositories, and, DevOps system like CI/CD tools. Intuitively it is advantageous to allow for utilization of these tools in agent-based modelling and model execution. As a side effect of its design, ASC2 programs can directly utilize any system or library available to JVM-based programs without the need for any interfacing. This includes all the development tools listed above and many others. In Chapter \ref{ch:emas} it is shown how utilizing these tools, not only benefits agent and multi-agent system (MAS) communities in e.g., testing their designs with mainstream automated testing tools, but more importantly, allows agent models to be used as part any software development process, be it for testing or any other purpose.


\section{Research Context and Collaborations}
Before starting the next chapter, I will try to put this thesis into the context and environment that the research was conducted, highlighting the parallel research that had a connection to it, and, some of the events that affected it. The research was done in the Complex Cyber-Infrastructures (CCI)\footnote{\url{https://cci-research.nl/}} research group and was funded by the project Data Logistics for Logistics Data (DL4LD)\footnote{\url{https://dl4ld.nl/}}. There were two other closely related projects: Secure Scalable Policy-enforced Distributed Data Processing (SSPDDP)\footnote{\url{https://cr-marcstevens.gitlab.io/sspddp/}} and Enabling Personalized Interventions (EPI)\footnote{\url{https://enablingpersonalizedinterventions.nl/}} that shared research with DL4LD.

Following highlights some of the parallel research threads that were conducted mostly by other PhD candidates and post-docs alongside this work. In the context of this thesis, Agent-Oriented Programming approaches were utilized for developing Agent-Based Models. The counterpart to this are the mathematical models of agents which were simultaneously studied in the context of the group by Fractic et. al. \cite{Peter}. Where this thesis tries to find approaches in enhancing models for developing policies, there were parallel works that focused on what these policies should be, including risk management and enforcement schemes by Zhou et. al. \cite{Xin}. Another thread of research, as it was mentioned in the introduction was about norm reasoning. These works that their results are used throughout this thesis were done by Thomas, Lu-Chi, Milen \cite{Thomas,Milen,Lu-Chi}. Finally there was a more technologically focused side of this work, mainly on development of Data Market-Places e.g., Reggie et. al. \cite{Reggie}, Lu et. al. \cite{Lu}.

Finally, majority of the time dedicated to this research overlapped with COVID-19 restrictions, and apart from \textit{normal} issues, it meant there was little to no real interaction with the industry partners that had started this project in the first place. To provide full transparency for the reader the phrase ``it turned out that it is not only data-sharing use-cases that are in need of such method'' in the motivation section, while still true, also partially means that it became very hard to explore policies in data-sharing without having stakeholders around that have data and are interested in sharing them.  This meant that while this research was at a relatively high level of abstraction from the start, for better or worse, became even more abstract and high-level that it was intended to be ---or I intended it to be---, but fortunately, my supervisors were already interested in the more theoretical side of the issue \cite{Tom,Giovanni} which fed into this research in every aspect. However, by interacting with the respective communities e.g., AI and Law, Normative Systems, and, Multi-Agent Systems, my observation was that there is an interest for more practical (or better put, technological) approaches to bring the long standing results of these communities closer to mainstream domains. This is why every chapter of this thesis includes developed tools or proof of concepts that utilize fairly modern and mainstream software ecosystems.  


